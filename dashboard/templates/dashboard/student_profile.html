{% extends 'base.html' %}
{% block content %}
{% load static %}
<script src="{% static 'js/student_profile.js' %}"></script>
<div id="main_container">
<style scoped>
  @import "{% static 'css/student_profile.css' %}";
</style>

<div style="margin-bottom: -20px" onload="myFunction()">
	<div class="" style="margin-left: 10px">
     <a class="btn-floating waves-effect waves-light title-back-btn" onclick="window.history.back();" onmouseover="" style="cursor: pointer;">
    	<img src="/media/icons8-left-64.png" style="height: 45px;width: 45px; margin-bottom:5px;">
    	<!-- <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="45px" height="40px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
		<g>
			<g>
				<g>
					<path fill="#49A0AE" d="M7.9,256C7.9,119,119,7.9,256,7.9C393,7.9,504.1,119,504.1,256c0,137-111.1,248.1-248.1,248.1
						C119,504.1,7.9,393,7.9,256z"></path>
				</g>
			</g>
			<path fill="#FFFFFF" d="M231.4,258.7c30.7-30.7,61.4-61.4,92.1-92.1c26.8-26.8-14.9-68.2-41.8-41.3
				c-37.6,37.6-75.2,75.2-112.8,112.8c-11.4,11.4-11,30.3,0.2,41.5c37.6,37.6,75.2,75.2,112.8,112.8c26.8,26.8,68.2-14.9,41.3-41.8
				C292.6,319.9,262,289.3,231.4,258.7z"></path>
		</g>
		</svg> -->
     </a>
     <span class="grey-text text-darken-2" style="font-size: 1.64rem;line-height: 52px; margin-left: 50px;">Student Profile</span>
    </div>
</div>
<hr>
    <div class="col s12 active">
      <div class="card grey lighten-5">
          <div class="card-content" style="padding:5px 24px;">
            <div class="row">
              <form class="col s12" style="padding:0;">
                <div class="edit_buttons hidden" style="float:right;">
              
              <span style="cursor: pointer; color: white">
                <a class=" btn-info btn-lg" id="edit_personal">
                  <span class="fa fa-edit"></span>
                </a>
              </span> 
                
                <span style="cursor: pointer; color: white">
                <a class=" btn-info btn-lg" id="cancel_personal">
                  <span class="fa fa-close"></span>
                </a>
                &nbsp;&nbsp;&nbsp;
                <a class=" btn-info btn-lg" id="save_personal">
                  <span class="fa fa-thumbs-o-up"></span>
                </a>
                </span>

            </div>
              <!-- ................................................... -->
              <div id="personal">
              <span class="card-title blue-text text-darken-2">Personal Details</span><br><br>

              <div class="input-field col s12 m3 l3" id="student_img_div" style="margin-bottom:10%;">
                
                <p style="margin-bottom: 5px;">
                <a href="#" class=" btn-info btn-lg" style="">
                  <span class="fa fa-camera"></span>
                </a>
              </p>

                  <img src="https://digimkey.com/dmk/assets/images/student_placeholder.jpg" alt="student_image" style="max-width: 200px;max-height:120px;" id="profile" data-src="https://digimkey.com/dmk/assets/images/student_placeholder.jpg"><br>
                  <div class="file-field input-field">
                    <div class="btn" style="line-height: 2rem;padding: 0 1rem;height:2rem;font-size:0.8em;">
                      <span>Upload image</span>
                      <input type="file" id="profile_file" disabled onchange="readURL(this);" style="border-bottom: none;visibility:hidden"">
                    </div>
                    <div class="file-path-wrapper" style="visibility: hidden;">
                      <input class="file-path validate" type="text" style="border-bottom: none;">
                    </div>
                  </div>
                </div>

                <div class="input-field col s12 m3 l3">
                    <label for="first_name">First Name <span class="mandatory"> * </span></label>
                    <input  id="first_name" name="first_name" type="text" class="validate black-text disabled_toggle" value="{{form.first_name}}" required placeholder="{{form.first_name}}">
                </div>

                 <div class="input-field col s12 m3 l3">
                 <label for="middle_name">Middle Name</label>
                    <input  id="middle_name" name="middle_name"  type="text" class="validate black-text disabled_toggle" value="{{form.middle_name}}" placeholder="{{form.middle_name}}">
                </div>
    
               <div class="input-field col s12 m3 l3">
                  <label for="last_name">Last Name</label><span class="mandatory"> * </span>
                  <input  id="last_name" name="last_name"  type="text" class="validate black-text disabled_toggle" value="{{form.last_name}}" required placeholder="{{form.last_name}}">
              </div>

              <div class="input-field col s12 m3 l3">
                  <label for="email">Email</label>
                  <input  id="email" name="email"  type="text" class="validate black-text disabled_toggle" value="{{form.email}}" placeholder="{{form.email}}">
              </div>
              
               <div class="input-field col s12 m3 l3">
                  <label for="mobile">Mobile</label><span class="mandatory"> * </span>
                  <input  id="mobile" name="mobile"  type="text" class="validate black-text disabled_toggle" value="{{form.mobile}}" required placeholder="{{form.mobile}}">
               </div>
                               

               <div class="input-field col s12 m3 l3">
                  <label for="Dob">Date Of Birth</label><span class="mandatory"> * </span>
                  <input  id="dob" name="dob"  type="text" class="validate black-text disabled_toggle" value="{{form.dob}}" required placeholder="{{form.dob}}">
               </div>

               <div class="input-field col s12 m3 l3">
                  <label for="religion">Religion</label>
                  <input  id="religion" name="religion"  type="text" class="validate black-text disabled_toggle" value="{{form.religion}}" placeholder="{{form.religion}}">
               </div>

               <div class="input-field col s12 m3 l3">
                  <label for="caste">Caste</label><span class="mandatory"> * </span>
                  <input  id="caste" name="caste"  type="text" class="validate black-text disabled_toggle" value="{{form.caste}}" required placeholder="{{form.caste}}">
               </div>

               <div class="input-field col s12 m3 l3">
                  <label for="adhar">Adhar No.</label><span class="mandatory"> * </span>
                  <input  id="adhar_no" name="adhar_no"  type="text" class="validate black-text disabled_toggle" value="{{form.adhar_no}}" required placeholder="{{form.adhar_no}}">
               </div>

               <div class="input-field col s12 m3 l3  black-text">
               <label>Gender <span class="mandatory"> * </span></label>
                <select id="gender" name="gender" required select disabled class="disabled_toggle">
                  <option value="" selected >Gender</option>
                  <option value="male" {% if form.gender == 'male' or form.gender == 'Male' %} selected {% endif %} >Male</option>
                  <option value="female"{% if form.gender == 'female' or form.gender == 'Female' %} selected {% endif %}>Female</option>
                </select>
              </div>

              <div class="input-field col s12 m3 l3  black-text">
                <label>Blood Group </label>
                <select name="blood_group" id="blood_group" required select disabled class="disabled_toggle">
                  <option value="" selected disabled>Blood Group</option>
                  <option value="A+" {% if form.blood_group == 'A+' %} selected {% endif %} >A+</option>
                  <option value="A-" {% if form.blood_group == 'A-' %} selected {% endif %} >A-</option>
                  <option value="B+" {% if form.blood_group == 'B+' %} selected {% endif %} >B+</option>
                  <option value="B-" {% if form.blood_group == 'B-' %} selected {% endif %} >B-</option>
                  <option value="AB+" {% if form.blood_group == 'AB+' %} selected {% endif %} >AB+</option>
                  <option value="AB-" {% if form.blood_group == 'AB-' %} selected {% endif %} >AB-</option>
                  <option value="0+" {% if form.blood_group == 'O+' %} selected {% endif %} >O+</option>
                  <option value="0-" {% if form.blood_group == 'O-' %} selected {% endif %} >O-</option>
                </select>
              </div>
              </div>
              </form>
            </div>
          </div>
          <script type="text/javascript">
          $(document).ready(function() { 
              
              $("#first_name").prop('disabled', true);
              $("#middle_name").prop('disabled', true);
              $("#last_name").prop('disabled', true);
              $("#email").prop('disabled', true);
              $("#mobile").prop('disabled', true);
              $("#dob").prop('disabled', true);
              $("#religion").prop('disabled', true);
              $("#caste").prop('disabled', true);
              $("#adhar_no").prop('disabled', true);
              $("#gender").prop('disabled', true);
              $("#blood_group").prop('disabled', true);
              $("#profile_file").prop('disabled', true);
              $("#save_personal").prop('hidden', true);
              $("#cancel_personal").prop('hidden', true);

              // alert("hello");
           });
            $("#edit_personal").click(function(){
              $("#first_name").prop('disabled', false);
              $("#middle_name").prop('disabled', false);
              $("#last_name").prop('disabled', false);
              $("#email").prop('disabled', false);
              $("#mobile").prop('disabled', false);
              $("#dob").prop('disabled', false);
              $("#religion").prop('disabled', false);
              $("#caste").prop('disabled', false);
              $("#adhar_no").prop('disabled', false);
              $("#gender").prop('disabled', false);
              $("#blood_group").prop('disabled', false);
              $("#profile_file").prop('disabled', false);
              $("#save_personal").prop('hidden', false);
              $("#cancel_personal").prop('hidden', false);
              $("#edit_personal").prop('hidden', true);

              $('#first_name').parent().css('borer','1px solid green')
              // alert("hello");
              $("#edit_admin").prop('disabled', true);
            });
            
            $("#cancel_personal").click(function(){
              window.location.reload();
            });

            $("#save_personal").click(function(){
              
              var url = "{% url 'dashboard:update_student_profile' id=form.id %}";
              var formData = [];
                      formData.push($("#first_name").val());
                      formData.push($("#middle_name").val());
                      formData.push($("#last_name").val());
                      formData.push($("#email").val());
                      formData.push($("#mobile").val());
                      formData.push($("#dob").val());
                      formData.push($("#religion").val());
                      formData.push($("#caste").val());
                      formData.push($("#adhar_no").val());
                      formData.push($("#gender").val());
                      formData.push($("#blood_group").val());
                      console.log(formData)
                      var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();
                        $.ajax({
                        type: "post",
                        url: url,
                        data:{
                          'formData' : formData,
                        },
                        success: function(response) {
                          console.log(response);
                          alert("successfully updated.");
                          location.reload();
                        },
                        error: function(response) {
                          console.log(response);
                        }

                      });
            });
          </script>
        </div>
        <br>
         <!--.........................Admin Details..................................................-->
    
  <div class="card grey lighten-5" s>
    <div class="card-content" style="padding:5px 24px;">
      <div class="row" style="margin-bottom:0;">
        <div class="col s12 m12 l12">
            <div class="edit_buttons hidden" style="float:right;">
              <!-- <a class="btn-floating waves-effect waves-light blue cutom_btn edit_info">mode_edit</a> -->
              
              <span style="cursor: pointer; color: white">
                <a id="edit_admin"  class=" btn-info btn-lg" id="edit_personal">
                  <span class="fa fa-edit"></span>
                </a>
              </span> 
             

              <span>
                <a href="#" class=" btn-info btn-lg" hidden="true">
                  <span class="fa fa-thumbs-o-up"></span> Save
                </a>
              </span>
             
               <p>
                <a href="#" class=" btn-info btn-lg" hidden="true">
                  <span class="fa fa-close"></span> Cancel
                </a>
              </p>
            </div>
            <span class="card-title blue-text text-darken-2">Admin Details</span><br><br>
            <!--..........................................-->
            <div class="row">
              <form class="col s12" style="padding:0;margin-bottom:0;">
                <div class="input-field col s12 m6 l6 black-text">
                <label for="icon_telephone">Admission Date</label>
                  <input name="Admission Date" disabled type="date" class="datepicker disabled_toggle" id="admission_date" value="{{form.date_of_addmission}}" required placeholder="{{form.date_of_addmission}}">
                </div>

                <div class="input-field col s12 m6 l6">
                  <label for="gr_number">GR Number</label>
                  <input name="GR Number" id="gr_number"  disabled type="text" class="validate black-text disabled_toggle" value="{{form.gr_no}}" placeholder="{{form.gr_no}}" >
                </div>
                  
                   <div class="col s12 additional_info">
       
                   </div> 
                          <!--........................................................-->
              </form>             
            </div>
          </div>
        </div>
      </div>
    </div>
    

      </div>
      


</div>
      
 


  
{% endblock %}